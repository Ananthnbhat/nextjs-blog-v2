---
title: 'Spring IoC container (draft)'
tags: ['spring', 'spring-boot']
date: '2024-01-20'
lastmod: '2024-01-20'
# layout: ListLayout
summary: ''
---

<TOCInline toc={props.toc} />

## Overview

Spring framework implements Inversion of Control (IoC) - initialization, instantiation, configuration, management is controlled by Spring instead of developer.

Dependency Injection (DI) is a way to implement IoC - Spring injects dependencies (objects or beans) where & when required.

`ApplicationContext` is an interface, it is a sub-interface of `BeanFactory` with additional enterprise functionalities.

The objects that are defined as beans by the developer are stored in the IoC container, also called ApplicationContext. This ApplicationContext is responsible for DI. The ApplicationContext gets instructions on where, when & how to do the DI using the configuration metadata developer defines using xml, annotations or code.

To summarize,

- Spring implements IoC -> using DI -> taken care mainly by ApplicationContext
- Beans are the objects that we want ApplicationContext to manage (initialization, instantiation, configuration & management)
- Beans get stored in the ApplicationContext.
- The configuration metadata defined by a developer acts as instructions to ApplicationContext on how to manage the beans.
- The configuration metadata can be defines either using traditional xml or java based configuration such as spring boot annotations. Typical example - defining beans using `@Bean` annotated functions within `@Configuration` annotated classes.

It is possible to read the value of a bean stored in context using `context.getBean("beanName", BeanClassName.class);`.

## Beans overview

Spring beans are objects/methods that are fully managed by IoC container or ApplicationContext based on developer's instructions in the configuration metadata.

A bean defined by a developer can consist of following items (configuration metadata):

- Class
- Name of the bean
- Scope
- Constructor arguments
- Properties
- Mode of autowiring
- Lazy initialization mode (to initialize a bean at startup or on request)
- Initialization methods ()
- Destruction methods

In Spring boot these configuration metadata can be provided/generated by creating a class annotated with `@Configuration` or `@ConfigurationProperties`. The spring boot then generates the configuration metadata as a file, META-INF, by scanning all the classes annotated with `@ConfigurationProperties`.

The `@Bean` is annotated on top of method which sits inside `@Configuration` annotated class. There are many other annotations such as `@Service` or `@Repository` etc. All these also create beans but their use case is fundamentally different. For more info on this, [refer this page](./spring-boot-essentials-annotations-1#component-vs-bean-annotation).

## Sources

- [Spring boot documentation](https://docs.spring.io/spring-framework/reference/core/beans.html)
- [Spring boot configuration metadata](https://www.baeldung.com/spring-boot-configuration-metadata)
